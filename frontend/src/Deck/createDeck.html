<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Deck - Polyglot Interactive Mastery App</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/vue@next"></script>
</head>
<body>
  <div id="app">
    <!-- Primary Navigation Bar -->
    <nav class="navbar primary-nav">
      <a href="../index.html">P.I.M.A</a>
    </nav>
    <!-- Secondary Navigation Bar -->
    <nav class="navbar secondary-nav">
        <div class="nav-item dropdown">
          <a href="javascript:void(0)" class="dropbtn">Card</a>
          <div class="dropdown-content">
            <a href="..\Card\createCard.html">Create a Card</a>
            <a href="..\Card\modifyCard.html">Modify a Card</a>
            <a href="..\Card\deleteCard.html">Delete a Card</a>
            <a href="..\Card\viewCard.html">View a Card</a>
          </div>
        </div>
        <div class="nav-item dropdown">
          <a href="javascript:void(0)" class="dropbtn">My Deck</a>
          <div class="dropdown-content">
            <a href="createDeck.html">Create a Deck</a>
            <a href="modifyDeck.html">Modify Deck</a>
            <a href="deleteDeck.html">Delete Deck</a>
            <a href="viewDeck.html">View Deck</a>
          </div>
        </div>
    </nav>

    <!-- Body Content -->
    <main class="main-content">
      <div class="card-creation-container">
        <!-- Step 1: Deck Name Form -->
        <div v-if="step === 1" class="input-group">
          <h1 class="container-h1">Name Your New Deck</h1>
          <input type="text" v-model="newDeck.name" placeholder="Deck Name" required>
          <button class="btn-create" @click="nextStep">Next</button>
        </div>

        <!-- Step 2: Options for Creating New Card or Adding Existing Card -->
        <!-- Only show these buttons if not showing forms for creating or adding a card -->
        <div v-if="step === 2 && !showCreateCard && !showAddCard" class="action-buttons">
            <button class="btn-create" @click="showCreateCard = true">Create New Card</button>
            <button class="btn-create" @click="showAddCard = true">Add Existing Card</button>
        </div>
        
        <!-- Step 3: Create New Card Form -->
        <div v-if="showCreateCard" class="input-group">
            <h2 class="container-h1">Create a New Card</h2>
            <input type="text" v-model="newCard.name" placeholder="Card Name" required>
            <textarea v-model="newCard.description" placeholder="Card Description" required></textarea>
            <button class="btn-create" @click="addNewCardToDeck">Add Card to Deck</button>
            <button class="btn-create" @click="resetCreationForms">Back to Options</button>
        </div>
        
        <!-- Step 4: Add Existing Card Form -->
        <div v-if="showAddCard" class="input-group">
            <h2 class="container-h1">Add an Existing Card to Your Deck</h2>
            <ul class="card-list">
            <li v-for="card in allCards" :key="card.id" class="card-item">
                {{ card.name }}
                <button class="btn-create" @click="addExistingCardToDeck(card)">Add to Deck</button>
            </li>
            </ul>
            <button class="btn-create" @click="resetCreationForms">Back to Options</button>
        </div>
  

        <!-- Finalize Deck Creation -->
        <div v-if="newDeck.cards.length > 0" class="input-group">
          <button class="btn-create" @click="createDeck">Create Deck</button>
        </div>
      </div>
    </main>
  </div>

  <script>
    Vue.createApp({
      data() {
        return {
          step: 1,
          showCreateCard: false,
          showAddCard: false,
          newDeck: {
            name: '',
            cards: []
          },
          newCard: {
            name: '',
            description: ''
          },
          allCards: [] // This should be populated with existing cards data
        };
      },
      methods: {
        nextStep() {
          this.step = 2;
        },
        addNewCardToDeck() {
          this.newDeck.cards.push({ ...this.newCard });
          this.newCard = { name: '', description: '' }; // Reset the new card
          this.showCreateCard = false;
        },
        addExistingCardToDeck(card) {
          this.newDeck.cards.push(card);
          this.showAddCard = false;
        },
        createDeck() {
          // Logic to send newDeck to the server
          console.log('Creating deck:', this.newDeck);
          // Reset the form after deck creation
          this.newDeck = { name: '', cards: [] };
          this.step = 1; // Go back to the initial step
        }
      }
    }).mount('#app');
  </script>
</body>
</html>
